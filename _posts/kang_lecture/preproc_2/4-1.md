- 이번시간에는 탐색적 데이터 분석 EDA에 대해 알아보도록 해보겠습니다.

**Warm Up – 탐색적 데이터 분석(EDA)의 중요성**

- 강의에 앞서, **탐색적 데이터 분석**, 흔히 EDA라고 불리는 이 과정이 왜 중요한지 먼저 짚고 넘어가겠습니다.
- 우리가 데이터를 분석한다고 했을 때, 단순히 숫자만 보는 것이 아니라
- 데이터를 정리하고 요약하며, **시각적으로 표현하고 이해하는 과정**이 매우 중요합니다.



**1. 단순 수치 중심의 데이터 vs 시각화를 통한 인사이트**

- 첫 번째 그림을 보시면, **데이터를 텍스트나 수치로만 보고 있는 상황**이 묘사되어 있습니다.
- 이 경우 아무리 보고서를 만들어도 핵심 정보가 잘 드러나지 않기 때문에
- 결국 “오늘 정상이네…“라는 정도의 해석밖에 하지 못합니다.



- 반면 두 번째 상황에서는 데이터를 시각화하여 보고 있습니다.
- 이 경우 “고객군별 반응이 이렇게 달랐네!“라는 식으로 **데이터를 해석하고 의미를 끌어내는 수준**이 전혀 다릅니다.
- 실제 현업에서도 **단순 수치 나열이 아니라, 시각적으로 직관적인 메시지를 전달**하는 것이 훨씬 더 의사결정에 영향을 미칩니다.



**2. 시각화 중심 보고 vs EDA 중심 전처리**



- 다음은 시각화 중심 보고와 EDA 중심 분석 간의 전반적인 차이를 정리한 내용입니다.
- 여러가지가 있겠지만 몇가지만 간단히 요약하여 설명드리도록 하겠습니다.



**목적**

- 시각화 중심 보고는 **요약된 데이터를 직관적으로 전달**하기 위함입니다.
- 반면 EDA는 **데이터의 구조, 특성, 이상점 등을 파악**하고 본격적인 분석을 준비하기 위한 과정입니다.

**사용 도구 및 활동**

- 시각화 중심 보고는 막대 그래프, 파이 차트, 대시보드 등의 **그래픽 도구 중심**으로 진행됩니다.
- 반면 EDA는 **기술 통계, 상관관계 분석, 히스토그램, 상자그림, 데이터 분포 시각화** 등 보다 **통계 기반의 다면적 탐색 도구**를 활용합니다.

**결과물 활용**

- 시각화 보고는 프레젠테이션이나 요약 보고서 등으로 활용되고,
- EDA 결과는 분석 모델 설계, 데이터 품질 개선, 피처 엔지니어링 등 **실질적 분석의 기초 자료**가 됩니다.

**분석 범위와 시간 투자**

- 시각화는 주요 지표를 중심으로 **짧고 직관적인 분석**이 특징이고,
- EDA는 전체 데이터셋을 다루며 **상당한 시간과 통찰력을 요구**하는 전처리 단계입니다.



**3. 핵심 정의**

- 마지막으로 핵심 정의를 말씀드리며 정리하고자합니다.
- EDA는 분석의 첫 단추입니다.
- 데이터가 어떤 모양을 하고 있는지, 이상값은 없는지, 변수 간에 어떤 관계가 있는지를 알아내기 위한 과정입니다.
- **분석할 데이터의 구조와 품질을 이해하는 것이 1순위**이며,
- 이후 머신러닝, 통계모델, 시각화 등 어떤 분석을 하더라도 이 기반 없이 진행하면 신뢰성 없는 결과를 낼 수밖에 없습니다.



**결론**

- 결론적으로 EDA는 단순히 예쁘게 보여주는 시각화와는 다릅니다.
- 데이터의 **맥락과 본질을 파악하고 분석 방향을 설정하기 위한 탐색 과정**이며,
- 앞으로의 강의에서도 실제 데이터를 다루는 첫 단계로 꼭 익혀야 할 내용입니다.



[3:00]



**4. EDA와 시각화**

- 본격적으로 EDA 시각화에 대한 강의를 시작하기전에 변수에 대해 이야기를 하려고합니다.

- 우리가 데이터를 분석하거나 시각화를 수행할 때, 가장 먼저 해야 할 일은 **각 변수의 특성이 무엇인지 올바르게 파악하는 것**입니다.

-  왜냐하면 변수의 종류에 따라 적용할 수 있는 분석 기법이나 시각화 방법이 달라지기 때문인데요.

- 특히 모델링 이전의 **전처리 과정**이나 **EDA(탐색적 데이터 분석)** 단계에서도 변수의 특성을 명확히 아는 것은 매우 중요합니다.

  

- [그림]

- 화면과 함께 설명드리도록 하겠습니다.

- 변수는 크게 **범주형 변수(Categorical)**와 **수치형 변수(Numerical)** 두 가지로 나뉘게 됩니다.

- 그럼 각각 어떤 의미를 가지는지, 그리고 그 안에서 또 어떻게 나뉘는지를 살펴보겠습니다.




- 먼저 **범주형 변수**부터 살펴보겠습니다.

- 이 변수들은 숫자처럼 크기를 비교하거나 계산하는 게 목적이 아니라, **서로 다른 범주나 속성을 구분하는 데 사용하는 변수**입니다.

-  범주형 변수는 다시 두 가지로 나눌 수 있습니다.

  

  1. **명목형 (Nominal) 변수**

  - 이 유형은 **서로 다른 범주이긴 하지만, 순서가 없는 변수**입니다.
  - 예를 들어, **성별, 혈액형, 상품 유형, 지역 구분** 등이 여기에 해당합니다.
  - 즉, 이 값들끼리는 어느 쪽이 더 크거나 작다고 비교할 수는 없고, 단순히 구분만 가능한 경우입니다.

  

  2. **순서형 (Ordinal) 변수**

  - 이 경우는 **서열이나 순위가 존재하는 변수**입니다.
  - 예를 들어, **매우 좋음 > 좋음 > 보통 > 나쁨 > 매우 나쁨**처럼 **자연스러운 순서가 있는 경우**죠.
  - 또는 건강 상태(위험, 심각, 보통, 양호)처럼 상태의 단계가 분명한 경우도 여기에 포함됩니다.
  - 다만 중요한 점은, **순서는 있지만 간격의 크기는 정확히 알 수 없다는 점**입니다.



- 다음은 **수치형 변수**입니다.

- 이 변수들은 실제 수치를 가지며, **연산이 가능한 특성을 갖고 있기 때문에** 분석에 매우 자주 활용됩니다.

- 수치형 변수는 크게 두 가지로 나뉩니다.

  

  1. **이산형 (Discrete) 변수**

  - 이산형은 **정수 형태로 딱딱 끊어져 있는 값**들을 말합니다.
  - 예를 들어, **고객 수, 자녀 수, 차량 대수**처럼 셀 수 있는 값들이 여기에 해당합니다.
  - 중간 값은 존재하지 않기 때문에 **0, 1, 2처럼 불연속적인 숫자들**로 구성됩니다.

  

  2. **연속형 (Continuous) 변수**

  - 연속형 변수는 **값의 범위 안에서 모든 실수 값을 가질 수 있는 변수**입니다.
  - 예를 들어, **몸무게, 키, 시간, 길이** 등은 아주 작은 소수 단위까지도 측정이 가능하므로 연속적인 변수로 분류됩니다.
  - 이 연속형 변수는 **간격형(Interval)**과 **비율형(Ratio)**으로도 세분화할 수 있습니다.
  -  **간격형 변수**는 온도나 시험 점수처럼 **절대적인 0이 없는 변수**입니다.
  - 예를 들어, 온도 0도는 '없음'을 의미하는 것이 아니죠.
  - 반면, **비율형 변수**는 **절대적 기준점인 0이 존재하는 변수**입니다.
  - 예를 들어, **무게, 소득, 나이, 구매 금액** 등은 0이면 '없음'을 의미하고,
  - 따라서 이 변수들은 비율 계산이 가능합니다. 즉, **100만 원은 50만 원의 두 배라는 말이 성립**하는 거죠.

  

  

  

  **예시와 함께 이해해보기**

  - 예를 들어, 고객 데이터를 분석한다고 가정해 보겠습니다.
  - 고객의 성별은 명목형 변수에 해당하고요, 고객 만족도(불만족, 보통, 만족)는 순서형 변수, 구매 횟수는 이산형 변수, 구매 금액은 비율형 변수로 볼 수 있습니다.
  - 이처럼 변수의 유형을 정확히 이해하면, 이후 **시각화에서 어떤 그래프를 써야 하는지, 분석에서 어떤 처리가 필요한지**를 훨씬 명확히 판단할 수 있습니다.

  

  

- 정리하자면 변수의 유형은 데이터 분석의 출발점이자 기본입니다.

- 질적인지 수적인지, 순서가 있는지, 계산이 가능한지에 따라

- 사용할 수 있는 시각화 기법이나 통계 방법이 완전히 달라지기 때문에,

- 반드시 **각 변수의 특성을 분석 전에 정확히 이해하고 출발해야 한다**는 점을 꼭 기억하셨으면 합니다.

- 이에 대해서는 앞으로 강의를 계속 진행하며 데이터에 특성에 따라 어떤 기법을 적용하는지 계속 설명을 드릴 예정입니다.

[4:30]



- 이제 본격적으로 EDA 강의를 시작하도록 하겠습니다.
- 모두 ~

```
https://colab.research.google.com/drive/1NnmD-qbdWOXatF5-6BUVAORJXhMLXvgf?usp=copy
```

- 기달

[1:00]



**4.1 막대그래프와 히스토그램**

**4.1.1 막대그래프**

- 첫번쨰로 데이터 시각화 중 가장 기본적인 도구 중 하나인 **막대그래프(bar plot)**에 대해 알아보겠습니다.
- 막대그래프는 **범주형 데이터를 요약하여 시각적으로 비교**하는 데 매우 효과적인 도구입니다.
- 즉, 각각의 범주가 얼마나 자주 등장하는지를 막대의 높이나 길이로 표현하는 방식입니다.



- bar 그래프는 다음과 같이 사용할 수 있습니다.
- 먼저 범주형 데이터에 대해 앞서 배운 value_count 함수를 사용해 각 범주의 개수를 세어주구요
- 그런다음 matplotlib 라이브러리의 bar api를 통해 시각화를 진행합니다.
  - [읽기] bar 함수에 대한 파라미터로는



**matplotlib 소개**

- matplotlib은 파이썬에서 시각화를 위해 가장 널리 사용되는 라이브러리입니다.

- 그 중에서도 pyplot 모듈을 이용하면 **간단하게 차트를 그릴 수 있는 함수들을 제공**받을 수 있습니다.

  

**예제 설명**

- 예제로는 sklearn에서 제공하는 와인 데이터셋을 불러와 사용합니다.
- 이 데이터는 3가지 와인 품종으로 분류되어 있으며, 그 각각의 클래스에 얼마나 많은 데이터가 포함되어 있는지를 시각화해보는 것이 목적입니다.



- 먼저 데이터를 불러오도록 하겠습니다.



- 그 다음으로 target 값을 받아서 클래스 이름을 사람이 이해하기 쉽도록 class_0, class_1, class_2로 변환하고
- 각 클래스별로 **몇 개의 샘플이 있는지를 카운트**합니다.
- 이제 그래프를 그릴 준비는 충분히 되었구요 하나씩 그래프를 그려보도록 하겠습니다.



**수직 막대그래프**

- 첫 번째 그래프는 우리가 흔히 보는 **세로 막대그래프**입니다.
- 각 클래스의 인덱스를 기준으로 막대가 세워지고, 막대의 높이가 해당 클래스의 개수를 나타냅니다.
- 여기서 width, bottom, align과 같은 인자를 통해 **막대의 두께나 정렬 방식 등을 조정할 수 있습니다.**



**수평 막대그래프**

- 두 번째 그래프는 **수평 방향으로 막대를 표현**한 것입니다.
- plt.barh()를 사용하면 막대를 가로로 표현할 수 있습니다.
- x축과 y축이 바뀐다는 점을 제외하면, 해석 방식은 동일합니다.
- 막대 정렬 방식이나 간격도 마찬가지로 조절이 가능합니다.



**막대그래프 결과 해석**

- 시각화된 결과를 통해 우리는 다음과 같은 결론을 내릴 수 있습니다:
- class_1의 데이터 수가 가장 많고
- class_2가 가장 적습니다.
- class_0과 class_1은 상대적으로 유사한 수준이며,
- class_2와는 차이가 다소 큽니다.
- 이런 정보는 단순히 숫자를 보는 것보다 **훨씬 직관적이고 빠르게 파악**할 수 있게 도와줍니다.



**더 알아보기**

- 막대그래프는 주로 **범주형 변수의 분포를 시각화**할 때 사용됩니다.
- 특히 **클래스가 몇 개 존재하고 각각 몇 개의 샘플을 갖는지 비교할 때 자주 사용**되며,
- 분류 문제나 군집 결과를 확인할 때 **클래스 불균형 여부를 시각적으로 검토**하는 데 매우 유용합니다.

[5:00]



**4.1.2 히스토그램**

- 이번에는 연속형 데이터를 시각화할 때 유용한 도구인 **히스토그램(histogram)**에 대해 알아보겠습니다.
- 히스토그램은 **연속적인 수치 데이터를 구간으로 나누어 각 구간에 속한 데이터의 개수를 시각화**하는 그래프입니다.
- 주로 데이터의 **분포 형태나 이상값 여부, 데이터가 집중된 구간을 파악**할 때 사용됩니다.



**matplotlib의 hist 함수**

- matplotlib에서 히스토그램을 그릴 때는 plt.hist() 함수를 사용합니다.
- 주요 인자는 다음과 같습니다:
- column_name: 시각화할 열 이름
- bins: 데이터를 나눌 구간의 개수
- range: 구간의 시작과 끝 (예: range=(11,15))
- data: 대상 데이터프레임



**예제 설명**

- 이번 예제는 예제에서는 sklearn 와인 데이터의 연속형 변수인 alcohol 변수(알코올 도수)에 대한 히스토그램을 그려보도록 하겠습니다.
- range=(11,15)로 지정하여 11도에서 15도까지의 구간만 시각화하였으며, bins=10으로 설정하여 이 구간을 10등분합니다.



**히스토그램 결과 해석**

- 그래프를 통해 다음과 같은 인사이트를 얻을 수 있습니다:
- 가장 많은 데이터가 분포한 구간은 **13.5 ~ 14도 사이**입니다.
- 전반적으로 **13도 부근에 데이터가 많이 분포**되어 있으며,
- **14도 이상은 상대적으로 적은 데이터**만 존재합니다.
- 이는 특정 알코올 도수 범위에 와인들이 몰려있다는 것을 의미합니다.



**더 알아보기**

- 히스토그램은 **연속형 데이터의 분포를 시각화**할 때 가장 효과적인 도구 중 하나입니다.
- 특히 데이터가 **특정 범위에 집중**되어 있는지, 또는 **이상치가 존재하는지 파악**하는 데 유용합니다.
- **이항 분포, 정규 분포, 왼쪽/오른쪽으로 치우친 분포** 등을 한 눈에 파악할 수 있기 때문에 통계 분석의 시작점으로 자주 활용됩니다.

[3:30]



**4.2 상자그림(Boxplot)**

**4.2.1 상자그림이란?**

- 이번에는 **수치형 변수의 분포와 이상치를 시각적으로 파악**할 수 있는 도구인 **상자그림(Boxplot)**에 대해 알아보겠습니다.
- 상자그림은 데이터의 **최소값, 최대값, 중앙값, 사분위수, 이상치**를 한 눈에 보여주는 그래프로서, 통계분석이나 데이터 전처리 단계에서 매우 자주 사용됩니다.
- 특히 여러 집단 간의 **중앙값 비교**나 **분포의 대칭성 여부** 등을 빠르게 파악할 수 있다는 장점이 있습니다.
- 이 상자그림은 상자에 수염같은 선이 붙어있어 상자 수염이라고도 불립니다.



**상자그림 구조 설명**

- Boxplot은 다음과 같은 구성요소로 이루어져 있습니다:
- **중앙값 (Q2)**: 데이터의 정중앙 값으로, 상자 안의 가로선으로 표시됩니다.
- **1사분위수 (Q1)**: 하위 25% 지점
- **3사분위수 (Q3)**: 상위 75% 지점
- **IQR (Inter Quartile Range)**: Q3 - Q1로, 데이터가 가장 밀집된 범위
- **수염(Whisker)**: 일반적으로 Q1 - 1.5×IQR부터 Q3 + 1.5×IQR까지의 범위
  - 굳이 이런 어려운 수식으로 수염을 지정하는 이유는 이범위를 벗어나는 값은 통계적으로 이상치로 보기 위함입니다.
  - 그리고 최댓값 최솟값이라고 적혀져있는 부분은 전체 데이터에 대한 최대, 최소가 아닌 통계적으로 이상치를 제외한 데이터들의 최대 최소를 의미합니다.

- **이상치(Outlier)**: 수염 바깥에 위치한 데이터, 작은 원으로 표시됩니다.
- 이 구성요소들을 통해 **데이터의 중심, 퍼짐, 분포 형태, 이상치 유무** 등을 종합적으로 판단할 수 있습니다.



**4.2.2 예제: Iris 데이터셋으로 살펴보기**

- 예제로는 sklearn의 Iris 데이터셋을 사용하여 각 컬럼에 대해 상자그림을 그려보도록 하겠습니다.
  - 코드읽기



- 그래프를 확인해 보면 하나의 그래프에서 모든 수치형 특성의 분포를 동시에 확인할 수 있고,
- 어떤 특성에 이상치가 있는지 쉽게 식별할 수 있습니다.
- 예를 들어, **sepal width**에서는 몇 개의 이상치가 존재하며,
- **petal length**는 분포가 매우 넓다는 것을 시각적으로 확인할 수 있습니다.





**4.2.3 클래스별 비교를 위한 그룹화 Boxplot**

- 이번에는 같은 데이터셋에서 **클래스(Setosa, Versicolour, Virginica)**별로 그룹을 나누어 수치형 변수인 sepal width에 대해 상자그림을 그려보도록 하겠습니다.
  - 코드읽기



- 결과를 확인해 보면 Setosa는 다른 클래스보다 중앙값 높고 범위가 좁으며,
- Versicolour는 이상치가 없지만 중앙값이 낮고,
- Virginica는 분포가 넓고 이상치가 포함되어 있습니다.
- 즉, 특정 수치형 변수(sepal width 등)에 대해 세 그룹이 갖는 분포가 어떻게 다른지 시각적으로 비교할 수 있습니다.
- 따라서 이 방법은 **집단 간 차이를 비교하거나, 특정 클래스에 이상치가 집중되어 있는지 파악**할 때 유용합니다.

[5:30]



**4.2.4 Seaborn을 활용한 상자그림**

- 더 세련된 시각화를 위해 seaborn 라이브러리를 활용할 수 있습니다.
- seaborn은 matplotlib을 기반으로 하여 **더 간결하고 직관적인 시각화 스타일**을 제공합니다.
- 특히 그룹별 비교 시 자동으로 색상 구분이 되며,
- 적은 코드로 깔끔한 시각화를 구현할 수 있습니다.
- 예제에서는 x축에 클래스, y축에 sepal width를 두고 시각화하여,
- 각 클래스의 분포 차이를 색상과 위치로 직관적으로 확인할 수 있었습니다.



**꿀팁**

- 상자그림 그래프를 그릴때 하나의 팁을 드리자면
- 지금 데이터 예제는 서로 비슷한 스케일의 데이터로만 구성이 되어있기에 그림이 예쁘게 한눈에 들어오지만
- 데이터의 스케일이 서로 다를 경우에는 해석이 안될정도로 그래프가 나쁘게 나올 수 있습니다.
- 따라서 시각화를 원하는 컬럼의 데이터 분포 정도가 클래스별로 비슷한지를 앞서 요약통계 및 히스토그램을 통해 먼저 확인하는 것이 좋은 방법이 될 수 있습니다.
- 또한 차이가 있다면 향후 배워볼 스케일링을 적용하는 것도 좋은 방법이라고 생각합니다.



**상자그림 결과 해석**

- 마지막으로 정리를 하자면 상자그림을 통해 얻을 수 있는 인사이트는 다음과 같습니다
- **데이터의 중심값(중앙값)**이 어느 위치에 있는지
- **데이터의 분포 범위**가 어느 정도인지 (IQR 및 전체 수염의 길이)
- **이상치의 유무 및 위치**
- **여러 그룹 간 분포의 차이**
- 이처럼 상자그림은 통계 분석 및 머신러닝 전처리 단계에서 **변수 선택, 이상치 처리, 분포 비교** 등에 매우 유용하게 사용됩니다.

[3:00]



**4.3 산점도 (Scatter Plot)**

**4.3.1 산점도란?**

- 이번에는 **두 개의 수치형 변수 간의 관계를 시각적으로 파악**할 수 있는 도구인 **산점도(Scatter Plot)**에 대해 알아보겠습니다.
- 산점도는 각각의 데이터 포인트를 평면 상의 점으로 나타내는 가장 기본적인 2차원 그래프입니다.
- 특히 두 변수 간에 **어떤 패턴이 존재하는지, 선형 관계가 있는지, 또는 이상치가 있는지** 등을 확인하는 데 매우 효과적입니다.



**산점도 해석**

- 산점도를 해석할 때는 주로 **상관관계의 유형과 강도**를 기준으로 판단합니다.
- 관계의 유형으로는 세가지 가 있으며 아래 그림을 보시면 쉽게 이해가 가능하실 겁니다.
  - 첫번째로 **양의 상관관계**는 한 변수가 증가할수록 다른 변수도 증가하는 것입니다.
  - 다음으로 **음의 상관관계**는 한 변수가 증가할수록 다른 변수는 감소하는 것이구요
  - 마지막으로 **상관관계 없음**은 변수 간 뚜렷한 경향 없이 흩어져 있음을 나타냅니다.
- 이러한 관계는 점들의 분포 모양을 통해 시각적으로 추론할 수 있습니다.



- 다음으로 관계의 강도는 두가지가 있으며
  - 점들이 **직선 형태로 밀집**될수록 강한 상관관계
  - 점들이 **흩어져 있으면** 약한 상관관계로
- 이를 통해 변수 간의 **상관 정도를 정성적으로 해석**할 수 있습니다.



**4.3.2 예제: Iris 데이터로 살펴보기**

- 예제로는 **Iris 데이터셋의 ‘sepal length’와 ‘sepal width’ 간의 관계**를 산점도를 통해 시각화합니다.
  - 코드읽기



- 그려진 그래프를 해석하자면 
- 전반적으로 sepal length가 커지더라도 sepal width는 일정 수준 이하에서 유지되는 경향을 보이기도 합니다.
- 이정도면 거의 관계가 없다고 볼 수 있겠네요.





**4.3.3 클래스별로 나눠서 산점도 시각화하기**

- 이번에는 Iris 데이터셋의 class 컬럼을 기준으로 **세 그룹(Setosa, Versicolour, Virginica)**으로 나눠서 각각 색상으로 구분해 산점도를 그려보겠습니다.
  - 코드 읽기



- 그래프를 보았을 때 이 방법은 단순한 산점도보다 훨씬 더 많은 정보를 제공함을 알 수 있습니다.
  - 프리스타일
  



**4.3.4 Seaborn을 활용한 산점도 시각화**

- matplotlib보다 더 간편하고 아름답게 표현하려면 **Seaborn** 라이브러리를 사용할 수 있습니다.
- hue 옵션을 통해 **클래스별 색상 구분**을 쉽게 할 수 있고,
- style을 활용하면 **심벌 모양까지 다르게 설정**하여 시각적 구분을 더 강화할 수 있습니다.
  - 프리스타일




**더 알아보기**

- 산점도는 다음과 같은 상황에서 활용됩니다:
- 첫번쨰, **변수 간 상관관계 유무 파악**하여 **선형 회귀 모델의 사전 탐색 도구**로서 사용될 수 있습니다.
- 두번째, **분류 문제에서 클래스 간 경계 시각화**의 도구로서도 사용할 수 있죠.
- 때문에 산점도도 **EDA(탐색적 데이터 분석)**의 초반 단계에서 매우 자주 쓰이며,
- 복잡한 수식 없이도 **데이터 특성을 빠르게 직관적으로 이해**할 수 있는 강력한 시각화 도구입니다.



[5:00]







**4.4 선 그래프 (Line Plot)**

**4.4.1 수평선, 수직선 그리기**

- 이번에는 **특정 위치에 수평선이나 수직선을 추가하여 기준선을 표현**할 수 있는 방법에 대해 알아보겠습니다.
- 이러한 기준선은 **데이터의 경계, 평균선, 임계값** 등을 시각적으로 강조할 때 사용됩니다.



**✅ 수평선 (Horizontal Line)**

- 먼저 수평선은 plt.hlines() 함수를 사용하면 특정 y값을 기준으로 가로선을 그릴 수 있습니다.
- 이때 시작과 끝 x좌표, 선 색상 및 스타일을 설정할 수 있습니다.

**✅ 수직선 (Vertical Line)**

- 다음으로 수직선입니다.
- 수직선은 plt.vlines() 함수를 사용하면 특정 x값을 기준으로 세로선을 그릴 수 있습니다.
- 역시 마찬가지로 y 범위와 선의 스타일, 색상 등을 설정할 수 있습니다.



- 위 두 함수를 활용하면, 그래프에 기준선을 추가해 **의미 있는 값을 강조**하거나 **시각적 구획을 나누는 데 유용**합니다.
- 예제에서는 여러 스타일과 색상의 수평선/수직선을 추가해 표현한 결과를 확인해보겠습니다.
  - 코드읽기



**4.4.2 꺾은선 그래프 (시계열)**

- 다음으로는 즉 꺾은선 그래프(Time Series Line Plot)에 대해 알아보겠습니다.
- 꺾은선 그래프는 **시간이 흐름에 따라 데이터가 어떻게 증가, 감소, 또는 주기성을 띠는지 파악**할 수 있는 가장 직관적인 방법입니다.



**✅ 기본적인 시계열 선 그래프**

- 첫 번째 예제에서는 임의로 생성한 날짜와 값 데이터를 이용해 단일 선 그래프를 그려보겠습니다.
- 먼저 데이터를 생성하는 코드입니다.
  - 코드읽기
    - 시작, period 총 몇개의 데이터를 만들 건가, freq는 D로 날짜
    - 가시성이 좋도록 인덱스 설정
- 다음으로는 데이터를 선그래프로 나타내는 코드입니다.
  - 코드 읽기





**✅ 여러 카테고리의 시계열 데이터 시각화**

- 두 번째 예제는 조금 더 복잡한 구조로, **카테고리(Category)별로 시계열 데이터를 나누어** 선을 그려주는 방법입니다.
- 동일하게 먼저 데이터를 만들어 볼건데요
  - 코드읽기
    - title은 전체 배열을 길이만큼 반복
    - repeat은 원소를 길이만큼 반복
  - 데이터 확인



- 다음으로는 이 데이터를 카테고리별로 그룹화하고 시각화하는 코드입니다.
  - 코드읽기
    - 처음으로는 날짜와 카테고리별로 그룹화 하고 그룹 합을 구하는데요
    - 이 함수를 통해서 같은 날짜-카테고리 조합마다의 합계가 나타날 것입니다.
    - 이 결과 다중 인덱스 형태의 데이터 프레임이 산출 될 것인데 이를 unstack 함수를 통해 열로 펴 주는 작업을 진행하게 됩니다.
    - 결국 일자별로 각 데이터가 펼쳐진 형태로 만들기 위한 것으로 앞서 만든 데이터를 핸들링 하는 과정이라고 보시면 됩니다.
    - 이후 각 컬럼에 대해서 선그래프를 그리는 과정이구요
- 결과를 보면 각 카테고리(A, B, C)가 시계열상 어떻게 다른 패턴을 보이는지를 선 그래프를 통해 한눈에 파악할 수 있습니다.



**꿀팁**

- 시계열 데이터를 꺾은선 그래프로 그릴 때 다음과 같은 포인트를 기억하면 좋습니다:
- **x축은 반드시 정렬된 시간 데이터여야 합니다.** (DatetimeIndex)
- 또한 선의 **색상, 스타일, 마커를 활용하면 시각적 구분이 쉬우며**
- 범주형 데이터가 섞여 있다면 **groupby로 정리한 뒤 시각화하는 것이 정보를 파악하는데 유리합니다.**





**더 알아보기**

- 결과적으로 이러한 선 그래프는 **시간에 따른 증가/감소 추세**, **급격한 변화 또는 이상 패턴의 탐지**, **범주별 비교를 통한 시계열 패턴의 차이** 와 같은 인사이트를 제공합니다



[7:00]



**4.5 상관관계 시각화**

**4.5.1 산점도 행렬**

- 이번에는 **여러 수치형 변수 간의 관계를 한 눈에 확인할 수 있는 시각화 도구인 산점도 행렬(Scatter Matrix)**에 대해 알아보겠습니다.
- 산점도 그래프는 앞서 특정 변수간의 상관관계를 확인하기 위해 잠깐 확인해보았는데요 이번에는 전체 데이터프레임을 대상으로 행렬을 만드는 과정이라고 보시면 됩니다.
- 다시한번 소개를 하지면 산점도 행렬은 변수 쌍에 대한 그래프로, 변수 간의 선형 관계, 이상치를 시각적으로 파악할 수 있습니다.
- 특히, **변수 간 상관관계의 강도와 방향성**을 직관적으로 확인할 수 있어, EDA(탐색적 데이터 분석) 단계에서 매우 유용하다고 말씀드렸습니다.
- 반면, 산점도 행렬은 모든 변수쌍에 대해 상관관계를 파악할 수 있는 **표 형태의 시각화 도구이기 때문에**
- 데이터셋 전체를 파악하기에 유리합니다.



**산점도 행렬 구성과 해석**



산점도 행렬을 해석할 때는 아래와 같은 관점에서 보시면 좋습니다:

- 먼저 **히스토그램을 먼저 확인합니다.**
  - 산점도 행렬의 대각선에는 각 변수의 히스토그램이 있습니다.
  - 이를 통해 각 **변수의 분포 형태(정규분포인지, 치우쳐 있는지 등)**를 확인할 수 있습니다.
- 다음으로는 **각 변수 쌍의 관계를 살펴봅니다.**
  - 산점도 행렬의 나머지 칸은 변수 간의 산점도를 보여줍니다.
  - 여기서 **점들이 대각선처럼 정렬되어 있다면 상관관계가 있음**을 뜻하고,
  - 점들이 퍼져있거나 무작위로 보이면 **상관이 약하거나 없음**을 의미합니다.
- 마지막으로는 **변수 선택을 위한 다중공선성 고려해봅니다.**
  - 설명변수(입력값)들 간에 **너무 강한 상관관계가 있으면 문제가 될 수 있습니다.**
  - 예를 들어 X1, X2가 거의 완벽하게 같은 정보라면 매우 강한 강도의 양의 상관관계를 보일 것입니다.
  - 이게 만약 설명변수와 종속변수간의 관계라면 매우 유용하겠지만 설명변수끼리의 상관관계는 타겟이 되는 종속변수에 오히려 악영향을 끼치게 됩니다.
  - 그중 대표적인 것이 다중 공선성 문제인데요.



**🧠 다중공선성이란?**

- **다중공선성(Multicollinearity)**이란, 회귀분석 등에서 **설명변수들 간에 강한 상관관계가 있을 때** 발생하는 문제입니다.
- 이런 경우에는, 모델이 생각하는 설명변수의 영향력인 회귀계수 추정이 불안정해지거나
- 상관관계가 강한 특정 변수 중 하나의 효과가 왜곡되어 해석이 어려워집니다.
- 따라서 산점도 행렬을 통해 설명변수들끼리 **중복되거나 지나치게 비슷한 것이 있는지를 확인**하는 것이 중요합니다.
- 이를 수치적으로 구하는 방법도 존재하는데, 이번 강의에서는 일단 EDA를 통해서 관계파악을 통해 위험성을 탐지하는데 초점을 맞추겠습니다.



- 그런데 한번 더 깊이 들어가자면 이는 통계적인 모델을 사용할때 발생하게되는 문제이구요
- 머신러닝의 트리 모델이나 딥러닝 모델 같은 경우에는 크게 영향을 끼치진 않습니다.
- 다만 똑같은 변수가 두개있게 되면 불필요한 연산에 자원을 사용하게 되니 주요 변수만을 고려해 넣어주는 편입니다.



**예제 분석**

- 예제에서는 Iris 데이터셋의 4가지 수치형 특성(sepal length, sepal width, petal length, petal width)에 대해 산점도 행렬을 구성하였습니다.
  - 코드읽기
  - 그래프 확인



- 이 해석은 다음과 같이 할 수 있겠네요
  - sepal length와 petal length 사이에는 **강한 양의 상관관계**가 존재하며
  - petal width와 petal length 사이 역시 **강한 양의 상관관계**가 존재합니다.
  - 반면, sepal width는 다른 변수들과 비교적 상관이 약한 것으로 나타났습니다.
  - 이때, petal length와 같이 다른 변수들과 강한 양의 상관관계가 있을 경우에는 앞서 말씀드린 다중공선성 문제가 있는지 파악을 해야하는데
  - 이 부분은 뒤 전처리 과정에서 다시 확인해 보도록 하겠습니다.



**Seaborn의 Pairplot 활용**

- 좀 더 세련된 시각화를 원한다면 **Seaborn의 pairplot**을 사용할 수 있습니다.
- pairplot은 산점도 행렬을 그릴 뿐 아니라, hue 인자를 통해 **카테고리별 색상 구분**까지 지원합니다.
- 예제에서는 Iris 데이터셋을 대상으로 클래스별(Setosa, Versicolour, Virginica)로 색상을 다르게 지정하여 시각화하였고,
- 그 결과 각 클래스가 **변수 조합에 따라 어떻게 구분되는지 시각적으로 확인**할 수 있습니다.



[6:00]



**4.5.2 상관계수 행렬 시각화**

- 이번시간의 마지막, EDA의 마지막으로 변수 간의 **수치적 상관관계(상관계수)**를 시각화하는 **상관계수 행렬**에 대해 알아보겠습니다.
- 상관계수는 -1에서 1 사이의 값을 가지며, 두 변수 간의 **선형 관계의 강도와 방향**을 수치로 나타냅니다.



**상관계수 해석 기준**

- 아래는 상관관계 판단 기준 표이므로 이를 통해 상관관계를 해석한다면 그래프보다 좀 더 명확하게 결과를 얻을 수 있습니다.
- 보통 0.8, 0.6, 0.4, 0 이러한 단위로 약하고 강한지 판별할 수 있습니다.





**예제 해석**

- 예제에서는 범주형 변수인 Class 열을 제외한 나머지 수치형 변수 간의 상관계수를 구하고, Seaborn의 heatmap으로 시각화 해 보려고 합니다.
  
  

- 시각화 결과는 다음과 같은 해석을 유도할 수 있습니다:
  - petal length와 petal width는 **0.96**으로 매우 강한 양의 상관관계를 나타냅니다.
  - 또한 sepal length와 petal length은 **0.87**으로 강한 양의 상관관계를 나타내구요.
  - 반면 sepal width와 다른 변수들은 상관계수가 낮음을 알 수 있습니다.



**꿀팁**

- 상관계수 행렬은 수치 데이터가 많을수록 해석이 어려워지므로, 시각화할 때 **colormap(색상 그라데이션)**과 annot=True 설정을 통해 **정확한 수치와 색을 함께 제공**하면 해석이 쉬워집니다.
  - 코드 변경하며 보기




**상관관계 시각화는 언제 쓰이나요?**

- 마지막으로 **상관관계 해석 시 주의할 점**을 말씀드리며 마무리하고자 합니다.
- **상관계수가 높다 하더라도, 그것이 반드시 인과관계를 의미하는 것은 아닙니다.**
- 즉, **두 변수가 함께 움직인다 해서, 하나가 다른 하나의 원인이라고 단정할 수는 없습니다.**
- 그 이유는 **제3의 숨은 변수**가 두 변수 모두에 영향을 줄 수 있고, **우연히 상관관계처럼 보이는 경우**도 있을 수 있기 때문입니다.
- 따라서 상관관계 분석은 **변수 간 관계를 탐색하는 도구**로 활용하되,
- 실제로 인과관계를 입증하기 위해서는 **실험 설계나 추가적인 분석이 필요**합니다.
- 그래서 상관관계는 모델의 종속변수 예측 성능을 높이기 위해 빠르게 변수 후보를 추리는데 유용하며
- 인과관계는 모델의 해석력과 의사결정, 신뢰성을 높이는 핵심이 될 수 있습니다.



- 마무리









