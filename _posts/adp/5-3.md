---
layout: single
title:  'Part 6. 시각화 구현'
toc: true
categories: [ADP]
tags: [데이터 시각화]
---

## 1. 시각화 구현 개요

### 1. 시각화 플랫폼

- 기존 BI 플랫폼: 데이터 분석, 마이닝 등 기법을 통해 결과 리포트를 생성하기 위한 시각화 지원
- 전문 시각화 플랫폼: 다양한 관점에서 인사이트를 얻을 수 있도록 '지식 시각화' 관점에서 시각화 지원
- Gephi: 엣지와 노드로 이루어져 복잡한 네트워크 형태의 데이터를 시각화 할 때 유용

Information Builder<br>PowerPivot, PowerView<br>Visual Insight, Visual Intelligence<br>SAS, Tableau, Tibco, R, Excel, Weka, Gephi<br>Cognos Insight, QliKView, WolframAlpha, Better World Flux, Dipity, Many Eyes, CartoDB

### 2. 시각화 라이브러리

- 라이브러리가 제공하는 API로 코드 작성하여 시각화
- D3.js: 대표적인 시각화 라이브러리로 js 기반 HTML 지원
- JqueryVisualize, Flot, jqPlot: Jquery 기반 플러그인으로 웹사이트에서 사용할 수 있는 개발 편의성 측면의 장점

Flot<br>jQuery Visualize, jqPlot, D3.js, JavaScript InfoVis Toolkit, Node Box<br>Google Chart, Tangle

### 3. 인포그래픽스

- 웹서비스 형태로 제공, 사전 제작된 템플릿으로 인포그래픽 구현 가능

iChart, Visualize Free, Visual.ly

## 2. R 시각화

### 1. xy 그래프

- 전체적인 내용을 파악할 수 있지만, 많은 데이터가 있을 때에는 의미 파악이 어려움

````R
ggplot(Data, aes(x=x, y=y, colour=Diet, group=group))+geom_line()
````

- aes(): 그래프의 x축과 y축을 지정 
- geom_line(): ggplot에서 선 그래프를 그리는 함수

### 2. 포인트 그래프

- geom_point(alpha=.3) : alpha는 투명도를 나타냄

### 3. 스무스 그래프

- 그래프를 좀 더 명확히 구분 할 수 있음
- geom_smooth(alpha=.4, size=3) : size는 선 굵기

### 4. 개선된 그래프

- 포인트 그래프와 스무스 그래프를 동시에 표현

### 5. 히스토그램

- 분포가 연속적이며 선으로 되어있어 내용을 파악하기 어렵거나 분류 유형이 많을 경우 히스토그램을 이용해 쉽게 파악 가능
- facet_grid(변수 ~.): 가로로 출력
- facet_grid(.~ 변수): 세로로 출력
- binwidth: 구간의 간격

### 6. 포인트 그래프

- 간단하게 데이터를 정적으로 보여주며, 유형별로 색을 다르게하여 특성을 파악할 수 있음
- coord_cartesian(ylim=c(0,40)): y축을 0~40으로 범위 지정
- scale_colour_continuous(breaks=c(100,300)): 범위 지정
- size: 포인트에 크기 할당
- geo_hline: 임의의 선 삽입
- shape: 포인트 전체를 다른 모양으로 바꿈, NA면 모양을 없앨 수 있음
- annotate("rect", xmin~max, ymin~max): 특정 영역을 박스로 지정

### 7. 막대그래프

- 막대 그래프에 옵션을 주어 알아보기 쉽게 할 수 있음
- fill은 막대 내부의 색, colour은 막대 테두리의 색 지정 -> 히스토그램도 가능
- factor(변수): 범주형 데이터는 factor로 전환해 범주화
- geom_bar(): 막대그래프 생성

### 8. 선그래프

- 시간의 흐름에 따른 등락을 보기 쉽기에 시계열 지표에 사용

### 9. 샤이니

- R에서 곧바로 인터렉티브하게 웹 앱을 만들 수 있는 패키지
- 시각화 자료를 웹으로 쉽게 배포 할 수 있음
- slider, tabsets, datatable, morewidget

### 10. 모자이크 플롯

- 복수의 categorical variable 분포 파악에 도움되는 시각화 방법

## 3. D3.js

D3.js는 자바 스크립트 기반의 데이터 시각화 라이브러리, SVG, canvas 등 에서 동작하며 css를 통해 요소 조작 가능

### 1. D3.js 시각화 구현 절차

- 데이터 획득 -> 데이터 파싱(API 이용) -> 데이터 필터링(제거) -> 데이터 표현 -> 상호작용 추가
- 객체 지향 언어이므로 객체를 생성하여 프로그래밍
- SVG: 그림을 그리기 위한 HTML 태그
- Scale: 시각화의 최적화를 위한 함수

### 2. 막대 차트 예제

1. 객체 생성

````javascript
var width = 500;
var height = 200;
var svg = d3.select("#chart").append("svg").attr("width", width).attr("height", height)
````

2. 데이터 입력

   - D3는 Json 배열 형태의 데이터를 입력으로 사용

3. 스케일 정의

   - 막대차트의 높이가 100, 데이터 범위 0~100 -> 데이터와 막대의 높이는 1:1
   - 막대차트의 높이가 50, 데이터 범위 0~100 -> 값이 50이라면 막대 높이는 25
   - 막대차트의 높이를 100%로 보고 비율에 따라 높이를 정함

   ````javascript
   var padding = 20;
   var y = d3.scale.liner().domain([0, d3.max(dataset)]).range([height-padding+5,5])
   var x = d3.scale.liner().domain([0, dataset.length]).range([padding, width])
   ````

4. 축 추가

   ````javascript
   var xAxis=d3.svg.axis().scale(x).orient('bottom');
   var yAxis=d3.svg.axis().scale(y).ticks(5).orient('left');
   svg.append('g').attr('class','axis').attr('transform','translate(0,"+(height-padding)+")').call(xAxis)
   svg.append('g').attr('class','axis').attr('transform','translate(0,"+padding+",0)').call(yAxis)
   ````

   - ticks: 눈ㄱ므의 크기 지정
   - transform: 객체에 변형을 주기 위한 기능, translate, rotate 등 같은 기능을 사용하기 위해 먼저 정의
   - translate(a, b): a는 x 축방향 a만큼 이동 (음수일 경우 왼쪽), b는 y축 방향으로 이동
   - ratate(c): c만큼 시계 방향으로 회전 (음수일 경우 반시계 방향)

### 3. 파이차트

1. 객체 생성
   - "#chart" 요소 선택
   - 출력상의 문제를 해결하기 위해 차트를 이동시켜야 함 -> transeform
2. 파이모양 구현
   - innerRadius와 outerRadius를 통해 반지름 길이 지정

### 4. 히트맵

- 히트맵 구현을 위해서는 canvas 객체 필요
- drawImnage: canvas에 준비한 이미지를 출력하기 위한 함수
- canvas는 SVG에 비해 객체 를 정보에 저장할 수 없고, 다시 그리기가 불리하지만 성능이 높다
- SVG는 객체에 모든 정보를 담고 있기에 event handler를 연결할 수 있지만 canvas는 그렇지 못함

