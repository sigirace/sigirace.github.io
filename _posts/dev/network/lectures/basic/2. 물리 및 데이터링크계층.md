## 1. 물리 계층과 데이터 링크 계층

### 1.1 물리 계층

- 전기를 통해 신호를 생성 -> 아날로그 신호
- 전자기기가 처리하기 위해선 디지털 신호로 바꿔줘야 함
- 물리 계층은 디지털 신호를 아날로그 신호로 바꾸고 목적지까지 아날로그 신호를 전달함
- 목적지에선 받은 아날로그 신호를 다시 디지털로 바꿈

### 1.2 데이터 링크 계층

- 같은 네트워크에서 목적지를 구분하는 계층
- MAC 주소를 이용해 연결된 컴퓨터를 구분하고 정확히 전송할 수 있음

# 📍 물리 계층

## 2. 케이블

### 2.1 UTP 케이블

- 랜선이라고 부르는 주변에서 흔히 볼 수 있는 케이블
- 유선 인터넷을 연결하는 경우
- 송/수신 케이블이 2개씩 존재 -> 전이중 통신 가능

### 2.2 동축 케이블

- 중앙에 데이터를 전송하는 구리선을 감싼 케이블
- 자기장 간섭이 적어 더 멀리 신호를 전달 가능
- 선이 하나기 때문에 반이중 통신만 가능

### 2.3 광 케이블

- 유리나 플라스틱을 사용해 빛을 전달
- 외부 간섭이 없어 전기를 이용하는 것 보다 더 많이 더 빨리 전송 가능
- 전기<->빛 변환하는 트랜시버가 필요

## 3. 랜카드

- 랜카드는 Network Interface Card라고 불리는 하드웨어로 데이터링크 계층에 해당하는 장치
- 메인보드에 내장되어있거나 추가 슬롯 연결
- 애플리케이션 계층부터 각 계층을 타고 내려온 최종 디지털 데이터인 프레임을 아날로그 데이터로 바꾸거나 디지털 데이터로 다시 변환하는 작업 수행
- LAN카드는 고유 주소인 MAC 주소를 가지고 있음
- 전세계에서 유일한 주소
- 아날로그 신호를 받으면 디지털 데이터로 변환
- 디지털 데이터에서 데이터 링크 헤더에 적힌 목적지 MAC 주소가 자신의 것과 일치하는지 비교
- 일치하면 CPU에게 데이터가 왔다고 알림

## 4. 리피터

- 거리가 멀어저 아날로그 신호가 약해지는 것을 방지
- 물리적인 신호를 증폭 -> 물리계층

## 5. 허브

- 여러 컴퓨터를 연결하려면 랜카드가 컴퓨터 개수만큼 필요함
- 이를 해결하기 위해 허브 등장
- MAC 주소에 상관 없이 단순히 물리 신호를 브로드캐스팅 -> 물리계층
- 리피터의 역할도 수행
- 각 PC에서 데이터를 전송할때 충돌이 일어날 수 있음
- **CSMA/CD**: 충돌이 나지 않는 시점을 기다렸다가 허브로 데이터를 보내는 것 -> 반이중 통신(한순간에 하나의 PC만 데이터를 전송함)
- 허브는 구조상 이유로 충돌이 발생할 수 밖에 없고 이러한 영역을 collision domain이라고 부름 (브로드캐스트가 수행되는 영역)
- **허브의 한계**: 컴퓨터가 늘어날 수록 충돌을 기다리는 시간이 길어져 네트워크 속도가 느려짐 -> 데이터 링크 계층에서 배울 브리지, 스위치의 등장 원인

# 📍 데이터링크 계층

- 물리 계층은 물리 신호 전달만을 담당
- 데이터 링크 계층에서는 기기에 MAC 주소를 부여해 원하는 기기에만 데이터를 전달할 수 있도록 함

## 6. 이더넷, 이더넷 헤더

- **이더넷**: 데이터 링크에서 가장 많이 사용하는 프로토콜
- **데이터링크 계층**: Preamble | SFD | Destination Address | Source Address | Length/Type | Data:Pad | FCS
  - 데이터는 왼쪽부터 오른쪽으로 전달됨
- **이더넷 헤더**: Destination Address | Source Address | Length/Type
- Preamble(7byte) | SFD(1byte) : 이더넷이 시작됨을 알림
- Destination Address(6byte) | Source Address(6byte) : 송신처, 수신처 Mac 주소
  - 수신처의 MAC주소가 모두 1(FF-FF-FF-FF-FF-FF)로 되어있으면 브로드캐스트하라는 의미

## 7. CSMA/CD

- UTP 케이블을 허브에 연결하면 스타형 구조
- CSMA/CD는 충돌을 방지하기 위해 생긴 프로토콜
  - 케이블에 전기신호를 감지해 신호가 없다면 전송
  - 전송시 충돌이 감지되면 Jamming 신호 전달
  - 데이터를 전송하고 싶은 PC는 랜덤한 시간을 기다렸다가 다시 전송
  - 재전송에 대한 충돌이 15번 반복하면 전송 포기 -> 악의적 전송방해 방지
- 현재 UTP 케이블은 전이중 통신이 가능했지만 예전에는 반이중 통신만 가능
- 송수신 케이블을 제대로 활용하려면 허브에 메모리가 있어야함
  - 송신이 겹칠 경우 순차적으로 보내야 했기 때문
  - 허브는 단순 브로드캐스팅 역할만 수행하기에 메모리 및 연산 불가

## 8. 브릿지

- 허브에 메모리와 cpu를 추가함
- 메모리에 있는 MAC 주소 테이블을 참조해 데이터를 전송함
  - 네트워크 트래픽이 줄어듬
- 충돌이 발생하지 않아 CSMA/CD 방식을 쓰지 않아도됨 -> 전이중 통신 가능
- 컬리전 도메인이 허브 기반으로 나누어짐

## 9. 스위치

- 브릿지와 기능적인 차이는 없고 성능이 더 좋음
- MAC 주소를 이용하기 때문에 데이터 링크 계층에 속함
- **Flooding**: MAC 주소 테이블에 없는 경우 브로드캐스팅하는 것
- **Learning**: MAC 주소 테이블의 포트에 MAC 주소를 할당
- **Forwarding**: MAC 주소 테이블에 있는 포트로 데이터를 전달
- **Filtering**: MAC 주소 테이블을 참조해 불필요한 트래픽을 발생하지 않음
  - 허브로 부터 브로드캐스팅 된 데이터일 경우 MAC 주소가 같은 포트에 해당될 수 있음
- **Aging**: MAC 주소 테이블의 메모리가 부족할 경우를 대비해 삭제
  - 5분이 지나면 삭제

## 10. 스패닝 트리 프로토콜

- 스위치에 사이클이 생길 경우 무한정 Flooding이 발생함 -> 이해하기 귀찮으니까 그냥 그렇다고쳐
- 스위치를 사용할 경우 무한루프에 빠지지 않게 하는 프로토콜

## 11. 스위치의 한계

- 스위치끼리 모든 컴퓨터를 연결하면 전세계를 연결할 수 있을까? -> NO
- 스위치가 브로드캐스팅을 전혀 하지 않는다고 말할 수 없음
  - Flooding과 Learning을 해야하니까
- **LAN 영역**: 스위치와 연결된 영역을 브로드캐스팅 영역이라고 부름
- 통신하는 컴퓨터가 많을수록 LAN 영역은 커짐
- LAN영역이 커지는 것은 결국 브로드 캐스팅을 해야할 영역이 커지는 것임
- 스위치의 메모리 한계로 인해 Flooding이 발생할 수 밖에 없는데, 수십만대의 PC에 브로드캐스팅 하는것은 트래픽이 매우 크게 발생함
- 브로드 캐스트 영역을 나누기 위해 네트워크 계층이 필요







