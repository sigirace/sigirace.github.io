## 3. Admin Pannel

**Admin defailt vs custom**

1. default

```python
from django.contrib import admin
from [app].models import [Model]

admin.site.register([Model])
```

2. custom

```python
@admin.register(Model)
class ModelAdmin(admin.ModelAdmin):
  filedsets = (
    (None, {"fields": ("username", "password")}),
  	(),...
 )
  list_display = [
    "model_colum1",
    "model_colum2",
    "model_colum3",
    ...
  ]
  list_filter = [
    "model_colum1",
    "model_colum1",
    ...
  ]
  search_fileds = [
    "model_colum1",
  ]
  exclude = (
    "model_colum1",
    "model_colum2",    
  )
```

- filedsets: admin pageì—ì„œ Modelì˜ filedê°€ ë³´ì´ëŠ” ìˆœì„œë¥¼ ì„¤ì •
  - ì„¹ì…˜ ì•ˆì— filedë¥¼ ë„£ì–´ì„œ ì œëª©ì„ ë¶™ì¼ ìˆ˜ ìˆìŒ
- list_display: admin pannelì— ë‚˜íƒ€ë‚¼ ì»¬ëŸ¼(ëª¨ë¸)
- list_filter: admin filterì— ë‚˜íƒ€ë‚¼ ì»¬ëŸ¼(ëª¨ë¸)
- search_fileds: admin ê²€ìƒ‰ì„ ìœ„í•œ ì»¬ëŸ¼(ëª¨ë¸)
- exclude: ìˆ˜ì •í•  ìˆ˜ ì—†ë„ë¡ í•¨

## â›”ï¸ Trouble Shooting

ğŸ’¥ **Messages**

- djangoëŠ” SYSTEM_APPSì— ì´ë¯¸ messageë¥¼ ê°€ì§€ê³  ìˆìŒ
- ì‹ ê·œ applicationì„ messageë¡œ ê°€ì ¸ê°€ë©´ ì•ˆë¨

ğŸ’¥ **DateTimeField vs TimeField**

- DateTimeField: ì¼, ì›”, ë…„ë„, ì‹œê°„, ë¶„ ì´ˆ
- TimeFiled: ì‹œê°„, ë¶„, ì´ˆ

# ğŸ“ Tip



### 1. objectì˜ ì´ë¦„ ì„¤ì •

```python
def __str__(self) -> str:
    return self.name
```



### 2. ì¹´í…Œê³ ë¦¬ ë³µìˆ˜í˜•

```python
class Meta:
    verbose_name_plural = "Amenties"
```



### 3. Admin

**columns**

```python
@admin.register(Room)
class RoomAdmin(admin.ModelAdmin):

    list_display = (
        "name",
        "price",
        "kind",
        "owner",
    )
```

**filter**

```python
@admin.register(Room)
class RoomAdmin(admin.ModelAdmin):

    list_filter = (
        "city",
        "price",
        "rooms",
        "toilets",
        "kind",
        "pet_friendly",
        "amenities",
    )
```

**readonly_fields**

```python
@admin.register(Amenity)
class AmenityAdmin(admin.ModelAdmin):

    readonly_fields = (
        "created_at",
        "updated_at",
    )
```

- ë“±ë¡ í™”ë©´ì—ì„œ readonly_fieldë¥¼ ë³´ì—¬ì¤Œ

## 8. Power Admin

### 8.0 Mehtod

- functionì„ admin í˜¹ì€ modelì— ì •ì˜í•˜ì—¬ ì‚¬ìš©
- ì—¬ëŸ¬ê³³ì—ì„œ ë‹¤ì–‘í•˜ê²Œ ì‚¬ìš©í•˜ë ¤ë©´ modelì— ì •ì˜í•˜ëŠ” ê²ƒì´ ì¢‹ìŒ

ğŸ“ **values**

```python
1: room.reviews.all().values("rating")
2: room.reviews.all()
```

- 1ë²ˆì€ dictionary
- 2ë²ˆì€ query set

```python
1: review["rating"]
2: review.rating
```

- ì‚¬ìš©ë²•ì´ ë‹¬ë¼ì§

### 8.1 Search Fields

```python
serach_fields = (
	"name",
	"price"
)
```

- í•„ë“œ ê²€ìƒ‰ì‹œ ì¥ê³ ëŠ” search_fieldì—ì„œ í¬í•¨í•˜ëŠ” ê²ƒë“¤ì„ ì°¾ì•„
- ê¸°ë³¸ì ìœ¼ë¡œ `__contains`
- `startswith`ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ì•ì— `^`ë¥¼ ë¶™ì—¬ì¤Œ ex) "^price"
- `exact`ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ì•ì— `=`ë¥¼ ë¶™ì—¬ì¤Œ
- fkë¥¼ ê¸°ì¤€ìœ¼ë¡œ ê²€ìƒ‰í•˜ë ¤ë©´ `__`ë¥¼ ë¶™ì—¬ì¤Œ ex) "owner__username"

### 8.2 Admin Action

```python
@admin.action(description="description")
def function(model_admin, request, queryset):
  pass
```

- 3ê°œì˜ íŒŒë¼ë¯¸í„°ê°€ í•„ìš”
  - `model_admin`: ì•¡ì…˜ì„ ê°€ì§€ê³  ìˆëŠ” ê²ƒ (class) ex) class RoomAdmin(`admin.ModelAdmin`)
  -  `request`: ì•¡ì…˜ì„ ìš”ì²­í•˜ëŠ” userì— ëŒ€í•œ ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆìŒ
  -  `queryset` : adminì—ì„œ ì„ íƒí•œ ê°ì²´ë“¤

```python
@admin.register(Room)
class RoomAdmin(admin.ModelAdmin):

    actions = (reset_prices,)
```

- actionsì— ì¶”ê°€í•¨

### 8.3 Custom Filter

```python
class WordFilter(admin.SimpleListFilter):

    title = "Filter by word"
    parameter_name = "word"

    def lookups(self, request, model_admin):
        return [("good", "Good"), ("bad", "Bad")]

    def queryset(self, request, queryset):
        if self.value() == "good":
            return queryset.filter(name__startswith="good")
        elif self.value() == "bad":
            return queryset.filter(name__startswith="bad")
```

- title: title
- parameter_name: url ê¸°ëŠ¥ ìˆ˜í–‰
- lookup: listë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜, í•„í„°ì— í‘œì‹œí•  ë‚´ìš©ì„ ë‹´ìŒ
  - self
  - request
  - model_admin: í•„í„°ë¥¼ ì‚¬ìš©í•˜ëŠ” í´ë˜ìŠ¤
- queryset: í•„í„°ë§ì„ ê±°ì¹œ ê°ì²´ë¥¼ ë¦¬í„´í•¨













