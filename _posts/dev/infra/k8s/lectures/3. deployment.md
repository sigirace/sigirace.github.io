## Deployment

### ğŸ‘€ ì •ì˜

- ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë‹¤ìš´ íƒ€ì„ ì—†ì´ ì—…ë°ì´íŠ¸ ê°€ëŠ¥í•˜ë„ë¡ ë„ì™€ì£¼ëŠ” ë¦¬ì†ŒìŠ¤

[image, deployment/layer]

- ë ˆí”Œë¦¬ì¹´ì…‹ê³¼ ë ˆí”Œë¦¬ì¼€ì´ì…˜ì»¨íŠ¸ë¡¤ëŸ¬ ìƒìœ„ì— ë°°í¬ë˜ëŠ” ë¦¬ì†ŒìŠ¤



### ğŸ“ì‘ì„± ìš”ë ¹

- Podì˜ metadata ë¶€ë¶„ê³¼ spec ë¶€ë¶„ì„ ê·¸ëŒ€ë¡œ ì˜®ê¹€
- Deploymentì˜ spec, templateì—ëŠ” ë°°í¬í•  í¬ë“œë¥¼ ì„¤ì •
- replicasì—ëŠ” ì´ í¬ë“œë¥¼ ëª‡ê°œ ë°°í¬í• ì§€ ëª…ì‹œ
- labelì€ ë””í”Œë¡œì´ë¨¼íŠ¸ê°€ ë°°í¬í•œ í¬ë“œë¥¼ ê´€ë¦¬í•˜ëŠ”ë° ì‚¬ìš©ë¨

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
	name: nginx-deployment
	labels:
		app: nginx
spec:
	replicas: 3
	selectour:
		matchLabels:
			app: nginx
  template:
  	metadata:
  		labels:
  			app: nginx
    spec:
    	containers:
    	-	name: nginx
    		image: nginx:1.7.9
    		ports:
    		-	containerPort: 80
```



ğŸ“Œ **Labels**

**1. Deployment**

```yaml
metadata:
	name: nginx-deployment
	labels:
		app: nginx
```

- `Deployment` ê°ì²´ ìì²´ë¥¼ ì‹ë³„í•˜ëŠ” ìš©ë„
- `Pod`ì™€ ì§ì ‘ì ì¸ ê´€ë ¨ì€ ì—†ìœ¼ë©° `Deployment` ì¡°íšŒì— ì‚¬ìš©

**2. Replica**

```yaml
spec:
	replicas: 3
	selectour:
		matchLabels:
			app: nginx
```

- `matchLabels`ì— ë“±ë¡ëœ labelì„ ê°€ì§„ podë“¤ì„ ê´€ë¦¬
- `template`ì— ë“±ë¡ë˜ëŠ” `Pod`ì˜ labelê³¼ ë™ì¼í•´ì•¼í•¨

**3. Pod**

```yaml
template:
  metadata:
    labels:
      app: nginx
```

- ìƒì„±ë  `Pod`ë“¤ì˜ labels



### ğŸ“ìŠ¤ì¼€ì¼ë§

```cmd
kubectl edit deploy <deploy name> # yaml íŒŒì¼ ìˆ˜ì •
kubectl scale deploy <deploy name> --replicas=<number> # ì§ì ‘ ìˆ˜ì •
```

- replicas ìˆ˜ë¥¼ ì¡°ì •







ğŸ“’ **Deployment ì˜ˆì‹œ**

```yaml
apiVersion: v1
kind: Service
metadata:
  name: http-go-svc
spec:
  selector:
    run: http-go
  ports:
    - protocol: TCP
      port: 80
      targetPort: 8080

---

apiVersion: apps/v1
kind: Deployment
metadata:
  creationTimestamp: null
  labels:
    run: http-go
  name: http-go
spec:
  replicas: 1
  selector:
    matchLabels:
      run: http-go
    strategy: {}
    template:
      metadata:
        creationTimestamp: null
        labels:
          run: http-go
      spec:
        containers:
        - image: gasbugs/http-go
          name: http-go
          ports:
          - containerPort: 8080
          resources: {}
status: {}
```

