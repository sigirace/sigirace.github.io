## ë ˆì´ë¸”ê³¼ ì…€ë ‰í„°

> (ì¤‘ìš”) ì¿ ë²„ë„¤í‹°ìŠ¤ ì‹œìŠ¤í…œ ì „ë°˜ì— ê±°ì³ ë ˆì´ë¸”ê³¼ ì…€ë ‰í„°ê°€ ì—†ëŠ” ê³³ì´ ì—†ë‹¤

### ğŸ‘€ ë ˆì´ë¸”

- ëª¨ë“  ë¦¬ì†ŒìŠ¤ë¥¼ êµ¬ì„±í•˜ëŠ” ë§¤ìš° ê°„ë‹¨í•˜ë©´ì„œë„ ê°•ë ¥í•œ ì¿ ë²„ë„¤í‹°ìŠ¤ ê¸°ëŠ¥
  - ì¸ì‹ì„ ìœ„í•´ ì´ë¦„í‘œë¥¼ ë¶™ì´ëŠ” ê²ƒ
  - í¬ë“œë¥¼ ê²€ìƒ‰í•  ìˆ˜ ìˆê²Œ í•˜ê³  ëª©ì ì„ íŒŒì•…í•  ìˆ˜ ìˆê²Œ í•¨
- ì„ì˜ì˜ í‚¤/ ê°’ ìŒìœ¼ë¡œ ì •ì˜ -> ë‚´ë§˜ëŒ€ë¡œ ì •ì˜ ê°€ëŠ¥
  - (ì˜ˆì‹œ) app: test
- í•œ ê°œ ì´ìƒì˜ ë ˆì´ë¸”ì„ ê°€ì§ˆ ìˆ˜ ìˆìŒ
- ë¦¬ì†ŒìŠ¤ë¥¼ ë§Œë“œëŠ” ì‹œì ì— ë ˆì´ë¸”ì„ ì²¨ë¶€
  - ì¶”ê°€ ë° ìˆ˜ì •ë„ ê°€ëŠ¥
- ëª¨ë“  ì‚¬ëŒì´ ì‰½ê²Œ ì´í•´í•  ìˆ˜ ìˆëŠ” ì²´ê³„ì ì¸ ì‹œìŠ¤í…œì„ êµ¬ì¶• ê°€ëŠ¥
  - app: ì• í”Œë¦¬ì¼€ì´ì…˜ êµ¬ì„± ìš”ì†Œ
  - rel: ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë²„ì „ ì§€ì • (release)

### ğŸ“Œ ë ˆì´ë¸”ì„ ëª…ë ¹ì–´

**1. ë ˆì´ë¸” ì¶”ê°€**

```
kubectl label pod [pod_name] [label_key]=[label_value]
```

**2. ë ˆì´ë¸” ìˆ˜ì •**

```
kubectl label pod [pod_name] [label_key]=[label_value] --overwirte
```

**3. ë ˆì´ë¸” ì‚­ì œ**

```
kubectl label pod [pod_name] [label_key]-
```

**4. ë ˆì´ë¸” í™•ì¸**

```
kubectl get pod --show-labels
kubectl get pod --show-labels -l '[label_key]' # filtering
```

- filteringì€ ì¡°ê±´ë¬¸ìœ¼ë¡œë„ ê°€ëŠ¥

**5. íŠ¹ì • ì»¬ëŸ¼ìœ¼ë¡œ í™•ì¸**

```
kubectl get pod -L [label_key1],[label_key2],...
```

### ğŸ“Œ ë ˆì´ë¸”ì„ ë°°ì¹˜ ì „ëµ

<p align="center"><img src="https://github.com/sigirace/page-images/blob/main/k8s/label/label_strategy.png?raw=true"></p>



### ğŸŒˆ ì‹¤ìŠµ ì˜ˆì œ

**1. ì¤€ë¹„**

```yaml
"http-go-pod-v2.yaml"
apiVersion: v1
kind: Pod
metadata:
  name: http-go # pod nam
  labels:
    creation_method: manual # ë§Œë“  ë°©ë²•ì— ëŒ€í•œ ì •ì˜
    env: prod # ì œí’ˆë ˆë²¨
spec:
  containers:
  - name: http-go # container name (pod nameê³¼ ê²¹ì³ë„ ìƒê´€ ì—†ìŒ)
    image: sigirace/http-go:v1
    ports:
    - containerPort: 8080
      protocol: TCP

"http-go-pod-v3.yaml"
apiVersion: v1
kind: Pod
metadata:
  name: http-go # pod nam
  labels:
    creation_method: manual # ë§Œë“  ë°©ë²•ì— ëŒ€í•œ ì •ì˜
    env: prod # ì œí’ˆë ˆë²¨
spec:
  containers:
  - name: http-go # container name (pod nameê³¼ ê²¹ì³ë„ ìƒê´€ ì—†ìŒ)
    image: sigirace/http-go:v1
    ports:
    - containerPort: 8080
      protocol: TCP
```

**2. ê¸°ë™**

```
kubectl create -f http-go-pod-v2.yaml
kubectl create -f http-go-pod-v3.yaml
```

**3. ë ˆì´ë¸” í™•ì¸**

```
kubectl get pod --show-labels
```

```
NAME         READY   STATUS    RESTARTS   AGE     LABELS
http-go      1/1     Running   0          2m36s   creation_method=manual,env=prod
http-go-v3   1/1     Running   0          16s     creation_method=manual-v3
```

```
kubectl get pod -L env
```

```
NAME         READY   STATUS    RESTARTS   AGE     ENV
http-go      1/1     Running   0          3m10s   prod
http-go-v3   1/1     Running   0          50s
```

**4. ë ˆì´ë¸” ì¶”ê°€**

```
kubectl label pod http-go test=foo
kubectl get pod --show-labels
```

```
NAME         READY   STATUS    RESTARTS   AGE    LABELS
http-go      1/1     Running   0          4m1s   creation_method=manual,env=prod,test=foo
http-go-v3   1/1     Running   0          101s   creation_method=manual-v3
```

**5. ë ˆì´ë¸” ìˆ˜ì •**

```
kubectl label pod http-go test=foo1 --overwrite
kubectl get pod --show-labels
```

```
NAME         READY   STATUS    RESTARTS   AGE     LABELS
http-go      1/1     Running   0          4m50s   creation_method=manual,env=prod,test=foo1
http-go-v3   1/1     Running   0          2m30s   creation_method=manual-v3
```

**6. ë ˆì´ë¸” ì‚­ì œ**

```
kubectl label pod http-go test-
```

```
pod/http-go unlabeled
```

**7. ë ˆì´ë¸” í•„í„°ë§**

```
kubectl get pod -l 'env=prod'
```

```
NAME      READY   STATUS    RESTARTS   AGE
http-go   1/1     Running   0          6m32s
```



