## ReplicaSet

### ğŸ‘€ ë ˆí”Œë¦¬ì¼€ì´ì…˜ ì»¨íŠ¸ë¡¤ëŸ¬

- ë ˆí”Œë¦¬ì¹´ ì…‹ì˜ êµ¬ë²„ì „, ì‚¬ì‹¤ ë‹¤ë¥¸ê²Œ ë³„ë¡œ ì—†ìŒ
- ì§€ì†ì ì¸ ëª¨ë‹ˆí„°ë§ì„ í†µí•´ í¬ë“œê°€ ë¬¸ì œê°€ ìƒê²¼ë‹¤ë©´ ë‹¤ì‹œ ìƒì„±í•¨
  - ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ ê¸°ë³¸ ì„¤ì •ì€ 5ë¶„
- ë ˆì´ë¸”ì„ ê¸°ë°˜ìœ¼ë¡œ ê´€ë¦¬í•¨
  - ë ˆì´ë¸”ì´ ë³€ê²½ë˜ë©´ ê´€ë¦¬ì—ì„œ ë²—ì–´ë‚¨
  

### ğŸ“Œ ë ˆí”Œë¦¬ì¼€ì´ì…˜ ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ì„¸ê°€ì§€ ìš”ì†Œ

- `ë ˆì´ë¸” ì…€ë ‰í„°`: í¬ë“œì˜ ë²”ìœ„ë¥¼ ì„¤ì •
- `ë³µì œë³¸ ìˆ˜`: ëª‡ê°œë¥¼ ë³µì œ í•  ì§€
- `í¬ë“œ í…œí”Œë¦¿`: ë ˆí”Œë¦¬ì¹´ ì…‹ í•˜ìœ„ì— íŒŒë“œê°€ ìƒì„±ë˜ëŠ”ë°, ë ˆí”Œë¦¬ì¹´ ì…‹ì´ ë³´ê¸° ìœ„í•œ íŒŒë“œì˜ ì„¤ëª…ì„œë¼ê³  ë³´ë©´ë¨

### ğŸ“Œ ë ˆí”Œë¦¬ì¼€ì´ì…˜ ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ì¥ì 

- ìˆ˜ë™, ìë™ìœ¼ë¡œ ìˆ˜í‰ ìŠ¤ì¼€ì¼ë§
- ê°€ìš©ì„±

### ğŸ“Œ yaml ì‘ì„±

```yaml
kind: ReplicationController
...
spec:
	replicas: 3 # ë³µì œë³¸ ìˆ˜
	selector: 
		app: nodejs # ë¼ë²¨ ì…€ë ‰í„°
  template: # íŒŒë“œ í…œí”Œë¦¿ - íŒŒë“œ ìƒì„±í•˜ëŠ” ê²ƒê³¼ ë™ì¼
  	metadata:
  		labels:
  			app: nodejs
    spec:
    	container:
    	...
```

### ğŸ“Œ ë ˆí”Œë¦¬ì¼€ì´ì…˜ì»¨íŠ¸ë¡¤ëŸ¬ ëª…ë ¹ì–´

**1. í™•ì¸**

```
kubectl get rc # ê¸°ë³¸ ì •ë³´
kubectl describe rc [rc_name] # ìƒì„¸ ì •ë³´, event í™•ì¸ ê°€ëŠ¥
```

**2. ì„¤ì • ë³€ê²½**

```
kubectl edit rc [rc_name]
```

**3. ì‚­ì œ**

```
kubectl delete rc [rc_name]
kubectl delete rc [rc_name] --casecade=false # ì‹¤í–‰ì‹œí‚¤ê³  ìˆëŠ” í¬ë“œë¥¼ ê³„ì† ìœ ì§€
```

### ğŸŒˆ ì‹¤ìŠµ

**1. ì¤€ë¹„**

```yaml
apiVersion: v1
kind: ReplicationController
metadata:
  name: http-go
spec:
  replicas: 3
  selector:
    app: http-go
  template:
    metadata:
      name: http-go
      labels:
        app: http-go
    spec:
      containers:
      - name: http
        image: sigirace/http-go:v1
        ports:
        - containerPort: 8080
```

- `selector`ì™€ `template`ì˜ labelì´ ë™ì¼í•´ì•¼í•¨

**2. ê¸°ë™**

```
kubectl create -f http-go-rc.yaml
```

**3. í™•ì¸**

```
kubectl get rc
```

```
NAME      DESIRED   CURRENT   READY   AGE
http-go   3         3         3       2m15s
```

```
kubectl get pod -o wide
```

```
NAME            READY   STATUS    RESTARTS   AGE
http-go-dw85v   1/1     Running   0          2m40s
http-go-jb6bl   1/1     Running   0          2m40s
http-go-tttgn   1/1     Running   0          2m40s

NAME            READY   STATUS    RESTARTS   AGE     IP           NODE       NOMINATED NODE   READINESS GATES
http-go-jb6bl   1/1     Running   0          5m49s   10.0.1.184   worker-1   <none>           <none>
http-go-dw85v   1/1     Running   0          5m49s   10.0.1.148   worker-1   <none>           <none>
http-go-tttgn   1/1     Running   0          5m49s   10.0.2.84    worker-2   <none>           <none>
```

**4. pod ì‚­ì œ**

```
kubectl delete pod http-go-dw85v
kubectl get pod
```

```
NAME            READY   STATUS    RESTARTS   AGE
http-go-jb6bl   1/1     Running   0          2m59s
http-go-tttgn   1/1     Running   0          2m59s
http-go-ztfpz   1/1     Running   0          2s
```

- `http-go-dw85v`ê°€ ì‚­ì œë˜ê³  `http-go-ztfpz`ê°€ ìƒê¹€

**5. label ì‚­ì œ/ë³€ê²½**

```
kubectl label pod http-go-jb6bl app-
kubectl get pod --show-labels
```

```
NAME            READY   STATUS    RESTARTS   AGE     LABELS
http-go-c5lfj   1/1     Running   0          32s     app=http-go
http-go-jb6bl   1/1     Running   0          5m15s   <none>
http-go-tttgn   1/1     Running   0          5m15s   app=http-go
http-go-ztfpz   1/1     Running   0          2m18s   app=http-go
```

**6. ë…¸ë“œ ìƒíƒœ ë³€ê²½**

- worker-2 í†µì‹ ì„ ëŠì–´ë²„ë¦¬ë©´ 5ë¶„ ë’¤ì— worker-1ì— ì¬ìƒì„±ë¨

**7. ìˆ˜ì •**

```
kubectl scale rc http-go --replicas=5
# ë˜ëŠ”
# kubectl edit rc http-go
kubectl get pod -o wide
```

```
NAME            READY   STATUS    RESTARTS   AGE     IP           NODE       NOMINATED NODE   READINESS GATES
http-go-c5lfj   1/1     Running   0          9m21s   10.0.1.184   worker-1   <none>           <none>
http-go-hg925   1/1     Running   0          5s      10.0.2.186   worker-2   <none>           <none>
http-go-jb6bl   1/1     Running   0          14m     10.0.1.148   worker-1   <none>           <none>
http-go-tttgn   1/1     Running   0          14m     10.0.2.84    worker-2   <none>           <none>
http-go-v42jv   1/1     Running   0          5s      10.0.1.132   worker-1   <none>           <none>
http-go-ztfpz   1/1     Running   0          11m     10.0.2.17    worker-2   <none>           <none>
```

**8. ìˆ˜ì • ì ìš©**

```
kubectl apply -f http-go-rc-v2.yaml
```

- ìƒˆë¡œìš´ íŒŒì¼ì´ë‚˜ `label`ê³¼ `selector`ê°€ ê°™ê¸°ì— `configured` ë¨



