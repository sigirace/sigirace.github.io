## 큐브시스템 컴포넌트 이해



주요 컴포넌트들은 kube-system 네임스페이스에 존재

kubectl get pod -n kube-system



[큐브 API 서버]

- 쿠버네티스 시스템 컴포넌트는 오직 API 서버와 통신
- 컴포넌트끼리 서로 직접 통신 X
- etcd와 통신하는 유일한 컴포넌트 API 서버
  - etcd: 클러스터의 설정정보를 저장하는 공간
- RESTful API를 통해 클러스터 상태를 쿼리, 수정할 수 있는 기능 제공



📍 API 서버의 역할

- 인증 플러그인을 사용한 클라이언트 인증
- 권한 승인 플러그인을 통한 클라이언트 인증
- 승인 제어 플러그인을 통해 요청 받은 리소스를 확인/수정
- 리소스 검증 및 영구 저장



[큐브 컨트롤러 매니저]

- API 서비스는 인증, 보안 외에 실제 쿠버네티스 작업 혹은 역할을 수행하지 않음
- 컨트롤러가 쿠버네티스 안의 자원 배치 등을 연산함
- 다양한 컨트롤러가 존재
  - 레플리케이션, 잡, 디플로이먼트 등등등



[큐브스케줄러]

- 일반적으로 실행할 노드를 직접 정해주지 않기에 자동으로 배포됨
  - 뒤에 포드에 대한 스케줄링을 정해주긴 함
- 노드의 자원 상태를 점검하여 배포할 노드를 선택
- 다수의 포드를 배치하는 경우 라운드로빈을 사용하여 분산



[스태틱 포드]

- kubelet이 직접 실행하는 pod
  - kubelet은 node나 master node의 데몬 서비스
  - 데몬이 직접 실행하는 pod
  - 런타임에 관여
- APIserever를 통해서 실행되지 않은 스태틱 포드는 삭제 불가
- 노드의 필요에 의해 사용하고자 하는 포드는 스태틱 포드로 세팅



[etcd]

- key:value 형태의 데이터베이스
- kubeernetes 내에서 기본적으로 사용하는 데이터베이스

