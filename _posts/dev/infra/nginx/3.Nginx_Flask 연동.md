## 5. Nginxì™€ Flaskì„ Proxyë¡œ ì—°ë™í•˜ê¸°

### 1. available default íŒŒì¼ ë³€ê²½

ğŸ“œ **/etc/nginx/sites-available/default**

```
sudo cp default [new_conf.server]
sudo vi [new_conf.server]

server {
	listen 80;
        location /api/ {
                proxy_pass http://flask:5000/;
                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_set_header X-Forwarded-Proto $scheme;
        }
}
```

- ì™¸ë¶€ì—ì„œ nginx ì„œë²„ì˜ í¬íŠ¸ë¡œ ìš”ì²­ì˜ ì˜¤ë©´ flaskì—ì„œ ì„œë¹„ìŠ¤ì¤‘ì¸ 5000 í¬íŠ¸ë¡œ ì—°ê²°

```
docker ps -a                                                                                           
CONTAINER ID   IMAGE                                      COMMAND                  CREATED          STATUS                     PORTS                                              NAMES
7fc5425dd2ee   7f965f3f8aae                               "tail -f /dev/null"      14 minutes ago   Up 14 minutes              0.0.0.0:5005->5000/tcp                             flask
603a598df2de   7f965f3f8aae                               "tail -f /dev/
```

### 2. enable íŒŒì¼ êµì²´

```
sudo rm /etc/nginx/sites-enable/default
sudo ln -s /etc/nginx/sites-available/[new_conf.server] /etc/nginx/sites-enable/default
ll /etc/nginx/sites-enabled # ìƒˆë¡œìš´ ì—°ê²° í™•ì¸
```

### 3. ì¬ì‹¤í–‰

```
sudo nginx -t
sudo systemctl reload nginx
```

